# üöÄ –ü–æ—à–∞–≥–æ–≤–æ–µ README: –ö–∞–∫ —è —Å—Ç—Ä–æ–∏–ª–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–∞

–≠—Ç–æ—Ç README –Ω–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π. –≠—Ç–æ **–º–æ—è –∏–Ω–∂–µ–Ω–µ—Ä–Ω–∞—è —Ö—Ä–æ–Ω–∏–∫–∞** ‚Äî —á—Ç–æ–±—ã —è —Å–∞–º–∞ (–∏ –ª—é–±–æ–π, –∫—Ç–æ –±—É–¥–µ—Ç —Å–º–æ—Ç—Ä–µ—Ç—å –ø—Ä–æ–µ–∫—Ç) –º–æ–≥–ª–∞ –ø–æ–Ω—è—Ç—å:
- –∫–∞–∫ —è –ø—Ä–∏—à–ª–∞ –∫ —Ç–µ–∫—É—â–µ–º—É —Ä–µ—à–µ–Ω–∏—é,
- —á—Ç–æ —è —Å–¥–µ–ª–∞–ª–∞ –≤ –∫–∞–∫–æ–π –º–æ–º–µ–Ω—Ç,
- –∏ –ø–æ—á–µ–º—É —ç—Ç–æ –∏–º–µ–µ—Ç —Å–º—ã—Å–ª.

---

## ‚úÖ –®–∞–≥ 1. –°—Ç–∞—Ä—Ç –ø—Ä–æ–µ–∫—Ç–∞
- –ü—Ä–æ—á–∏—Ç–∞–ª–∞ –∑–∞–¥–∞–Ω–∏–µ –æ—Ç –ê–≤–∏—Ç–æ.
- –ü–æ–Ω—è–ª–∞, —á—Ç–æ —Å–µ—Ä–≤–∏—Å –±—É–¥–µ—Ç —Å–æ—Å—Ç–æ—è—Ç—å –º–∏–Ω–∏–º—É–º –∏–∑ –¥–≤—É—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:
  - backend-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ Go;
  - –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö PostgreSQL.
- –ü—Ä–∏–Ω—è–ª–∞ —Ä–µ—à–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Docker –∏ Docker Compose.

---

## ‚úÖ –®–∞–≥ 2. –ù–∞–ø–∏—Å–∞–Ω–∏–µ Dockerfile (multi-stage)
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞ **–¥–≤—É—Ö—ç—Ç–∞–ø–Ω—É—é —Å–±–æ—Ä–∫—É** –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
  - –°–Ω–∞—á–∞–ª–∞ —Å–±–æ—Ä–∫–∞ Go-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ `golang:1.21-alpine`;
  - –ó–∞—Ç–µ–º –ø–µ—Ä–µ–Ω–æ—Å —Ç–æ–ª—å–∫–æ –±–∏–Ω–∞—Ä–Ω–∏–∫–∞ –≤ `alpine:latest`.
- –£—Å—Ç–∞–Ω–æ–≤–∏–ª–∞ `CGO_ENABLED=0` –∏ `-ldflags="-s -w"`, —á—Ç–æ–±—ã —Å–¥–µ–ª–∞—Ç—å –±–∏–Ω–∞—Ä–Ω–∏–∫ –ª—ë–≥–∫–∏–º –∏ –±–µ–∑–æ–ø–∞—Å–Ω—ã–º.
- –ù–∞—Å—Ç—Ä–æ–∏–ª–∞ `WORKDIR`, `COPY`, `RUN go build`, `CMD`, `EXPOSE`.
- –ü—Ä–æ–≤–µ—Ä–∏–ª–∞, —á—Ç–æ Dockerfile —Ä–∞–±–æ—á–∏–π –∏ –∞–¥–µ–∫–≤–∞—Ç–Ω–æ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è.

---

## ‚úÖ –®–∞–≥ 3. –°–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ docker-compose.yml
- –£–∫–∞–∑–∞–ª–∞ –≤–µ—Ä—Å–∏—é —Å—Ö–µ–º—ã: `version: "3.9"`.
- –î–æ–±–∞–≤–∏–ª–∞ –¥–≤–∞ —Å–µ—Ä–≤–∏—Å–∞:
  - `app`: –±–∏–ª–¥ –∏–∑ Dockerfile, –ø–æ—Ä—Ç 8080, `depends_on`, `restart`, `environment` —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –∏–∑ `.env`;
  - `db`: –æ–±—Ä–∞–∑ `postgres:14`, –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å—Ä–µ–¥—ã, –ø–æ—Ä—Ç 5432, volume, `restart`, `healthcheck`.

---

## ‚úÖ –®–∞–≥ 4. –û–±—Å—É–∂–¥–µ–Ω–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∑–∞–ø—É—Å–∫–∞
- –ü–æ–Ω—è–ª–∞, —á—Ç–æ –æ–±—ã—á–Ω—ã–π `depends_on` **–Ω–µ –∂–¥—ë—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –±–∞–∑—ã**.
- –î–æ–±–∞–≤–∏–ª–∞ `healthcheck` –¥–ª—è `postgres`, —á—Ç–æ–±—ã Docker –ø–æ–Ω–∏–º–∞–ª, –∫–æ–≥–¥–∞ –æ–Ω –≥–æ—Ç–æ–≤.
- –ò–∑—É—á–∏–ª–∞, —á—Ç–æ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `depends_on: condition: service_healthy`, –∏ **–æ—Å–æ–∑–Ω–∞–Ω–Ω–æ –ø—Ä–∏–Ω—è–ª–∞ —Ä–µ—à–µ–Ω–∏–µ –µ–≥–æ –¥–æ–±–∞–≤–∏—Ç—å** ‚Äî –¥–ª—è –Ω–∞–¥—ë–∂–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ `app` –ø–æ—Å–ª–µ `postgres`.

---

## ‚úÖ –®–∞–≥ 5. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ .env —Ñ–∞–π–ª–∞
- –°–æ–∑–¥–∞–ª–∞ —Ñ–∞–π–ª `.env`, —á—Ç–æ–±—ã –Ω–µ —Ö—Ä–∞–Ω–∏—Ç—å —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ `docker-compose.yml`.
- –í—ã–Ω–µ—Å–ª–∞ —Ç—É–¥–∞:
  - `DB_NAME`, `DB_USER`, `DB_PASSWORD`, `DB_PORT`, `DB_HOST`, `DB_SSL_MODE`
  - `APP_ENV`, `APP_PORT`, `GRPC_PORT`, `METRICS_PORT`
- –£–±–µ–¥–∏–ª–∞—Å—å, —á—Ç–æ Docker Compose –ø–æ–¥—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç `.env` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.
- –î–æ–±–∞–≤–∏–ª–∞ `.env` –≤ `.gitignore`.

---

## ‚úÖ –®–∞–≥ 6. –û—Ç–∫–∞–∑ –æ—Ç DB_URL –≤ –ø–æ–ª—å–∑—É –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
- –†–µ—à–∏–ª–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `DB_URL` –Ω–∞–ø—Ä—è–º—É—é, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –ø–æ–≤—ã—Å–∏—Ç—å –≥–∏–±–∫–æ—Å—Ç—å.
- –ò—Å–ø–æ–ª—å–∑—É—é –æ—Ç–¥–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏ —Å–æ–±–∏—Ä–∞—é —Å—Ç—Ä–æ–∫—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –≤ Go-–∫–æ–¥–µ —Å –ø–æ–º–æ—â—å—é `os.Getenv()`.
- –≠—Ç–æ —É–ø—Ä–æ—â–∞–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫—É –∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É –æ–∫—Ä—É–∂–µ–Ω–∏—è–º–∏.

---

## ‚úÖ –®–∞–≥ 7. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ APP_ENV –∏ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
- –î–æ–±–∞–≤–∏–ª–∞ `APP_ENV`, —á—Ç–æ–±—ã –≤ –±—É–¥—É—â–µ–º —Ä–∞–∑–ª–∏—á–∞—Ç—å `development`, `staging`, `production` —Ä–µ–∂–∏–º—ã.
- –ü–æ–¥–≥–æ—Ç–æ–≤–∏–ª–∞ `APP_PORT`, `GRPC_PORT`, `METRICS_PORT` ‚Äî –Ω–∞ —Å–ª—É—á–∞–π, –µ—Å–ª–∏ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è —Ä–∞–∑–¥–µ–ª—å–Ω–∞—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è.
- –í –∫–æ–¥–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `os.Getenv("APP_ENV")` –¥–ª—è —Å–º–µ–Ω—ã –ª–æ–≥–∏–∫–∏ –ø–æ–≤–µ–¥–µ–Ω–∏—è.

---

## ‚úÖ –®–∞–≥ 8. –ü—Ä–æ–±—Ä–æ—Å –ø–æ—Ä—Ç–æ–≤ —á–µ—Ä–µ–∑ .env
- –í —Å–µ–∫—Ü–∏–∏ `ports:` –∏—Å–ø–æ–ª—å–∑—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ `${APP_PORT}`, `${GRPC_PORT}`, `${METRICS_PORT}` –≤–º–µ—Å—Ç–æ –∂—ë—Å—Ç–∫–æ –∑–∞–¥–∞–Ω–Ω—ã—Ö —á–∏—Å–µ–ª.
- –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –±—ã—Å—Ç—Ä–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å –ø–æ—Ä—Ç—ã —á–µ—Ä–µ–∑ `.env`, –±–µ–∑ –ø—Ä–∞–≤–æ–∫ –≤ `docker-compose.yml`.
- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç–∞–∫–∂–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ `environment`, —á—Ç–æ–±—ã Go-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–Ω–∞–ª–æ, –Ω–∞ –∫–∞–∫–∏—Ö –ø–æ—Ä—Ç–∞—Ö —Å–ª—É—à–∞—Ç—å.

---

## ‚úÖ –®–∞–≥ 9. –°–æ–∑–¥–∞–Ω–∏–µ .env.example –¥–ª—è –ø—Ä–æ–≤–µ—Ä—è—é—â–µ–≥–æ
- –ß—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä—è—é—â–∏–π –º–æ–≥ –ª–µ–≥–∫–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–µ–∫—Ç, —Å–æ–∑–¥–∞–ª–∞ —Ñ–∞–π–ª `.env.example` —Å –±–µ–∑–æ–ø–∞—Å–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.
- –û–Ω –ª–µ–∂–∏—Ç –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏, –∏ –µ–≥–æ –º–æ–∂–Ω–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤ `.env` —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã:
  ```bash
  cp .env.example .env
  ```
- –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å –ø—Ä–æ–µ–∫—Ç –±–µ–∑ —É—Ç–µ—á–∫–∏ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏ –±–µ–∑ –ª–∏—à–Ω–∏—Ö —à–∞–≥–æ–≤.

---

## ‚úÖ –®–∞–≥ 10. –ù–∞—á–∞–ª–æ main.go ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- –ù–∞—á–∞–ª–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –ø—Ä–æ–µ–∫—Ç–∞ —Å `main.go`, –∫–∞–∫ —Å —Ç–æ—á–∫–∏ –≤—Ö–æ–¥–∞ –∏ –¥–∏—Ä–∏–∂—ë—Ä–∞ —Å–∏—Å—Ç–µ–º—ã.
- –ó–∞–¥–∞–ª–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è —Å –ø–æ–º–æ—â—å—é `os.Getenv` + —Ñ—É–Ω–∫—Ü–∏—è `getEnv` —Å –¥–µ—Ñ–æ–ª—Ç–∞–º–∏.
- –í–∫–ª—é—á–∏–ª–∞: `APP_PORT`, `DB_NAME`, `DB_USER`, `DB_PASSWORD`, `DB_PORT`, `DB_HOST`, `DB_SSL_MODE`.
- –î–æ–±–∞–≤–∏–ª–∞ `JWT_SECRET` ‚Äî —Å –∑–∞—â–∏—Ç–æ–π: –µ—Å–ª–∏ –Ω–µ –∑–∞–¥–∞–Ω, –≤—ã–≤–æ–¥–∏—Ç—Å—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `dev-secret-key`.
- –ü—Ä–æ–≤–µ—Ä–∏–ª–∞ –∏ –ª–æ–≥–∏—á–Ω–æ –æ—Ñ–æ—Ä–º–∏–ª–∞ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, `strconv.Atoi` –¥–ª—è –ø–æ—Ä—Ç–æ–≤).

---

## ‚úÖ –®–∞–≥ 11. –í—ã–Ω–æ—Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø–∞–∫–µ—Ç config
- –°–æ–∑–¥–∞–ª–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–æ–¥—É–ª—å `config`, –∫–æ—Ç–æ—Ä—ã–π –∏–Ω–∫–∞–ø—Å—É–ª–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è.
- –†–∞–∑–¥–µ–ª–∏–ª–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –Ω–∞ –¥–≤–∞ –±–ª–æ–∫–∞: `DatabaseConfig` –∏ `ServerConfig`, –≤–ª–æ–∂–µ–Ω–Ω—ã–µ –≤ `Config`.
- –î–æ–±–∞–≤–∏–ª–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —Å—Ç—Ä–æ–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è `DSN` –Ω–∞ —ç—Ç–∞–ø–µ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–Ω—Ñ–∏–≥–∞.
- –û–±—Ä–∞–±–æ—Ç–∞–ª–∞ `JWT_SECRET` —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ–º, –µ—Å–ª–∏ –æ–Ω –Ω–µ –∑–∞–¥–∞–Ω.
- –í `main.go` –ø–æ–¥–∫–ª—é—á–∞—é –∫–æ–Ω—Ñ–∏–≥ —Å –ø–æ–º–æ—â—å—é `config.LoadConfig()` –∏ –ø–µ—Ä–µ–¥–∞—é `cfg.Database.DSN` –≤ `postgres.NewStorage`.
- –î–æ–±–∞–≤–∏–ª–∞ –ø—Ä–æ–≤–µ—Ä–∫—É –æ—à–∏–±–æ–∫ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–∞–∫ –∫–æ–Ω—Ñ–∏–≥–∞, —Ç–∞–∫ –∏ storage.

---

## üí¨ –ó–∞—á–µ–º –≤—Å—ë —ç—Ç–æ?
- –ß—Ç–æ–±—ã –ø—Ä–æ–µ–∫—Ç –±—ã–ª:
  - –ª–µ–≥–∫–æ –ø–µ—Ä–µ–Ω–æ—Å–∏–º—ã–º;
  - –±—ã—Å—Ç—Ä–æ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ–º—ã–º –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π;
  - —Ä–∞—Å—à–∏—Ä—è–µ–º—ã–º (–º–æ–∂–Ω–æ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–∏—Ç—å Prometheus, pgAdmin –∏ —Ç.–¥.);
  - –∏ –ø–æ–∫–∞–∑—ã–≤–∞–ª –º–æ–π —É—Ä–æ–≤–µ–Ω—å –∏–Ω–∂–µ–Ω–µ—Ä–Ω–æ–≥–æ –º—ã—à–ª–µ–Ω–∏—è.

